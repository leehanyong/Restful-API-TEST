<!DOCTYPE html>
<html loan="ko">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Language" content="ko">
<title>spring boot hello 이달용</title>
<script src="http://code.jquery.com/jquery-1.11.3.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		/* window.location.assign('http://192.168.0.111:8888/dummyapi/exportcontract/filedownload/1'); */
	  run();
	});
 
	function run() {
		
		for(var i = 81; i <= 90; i++){
			
			var dataParam = '{\"exportType\":\"2EZ\",'
						+ '\"documentNumber\":\"TX8-LW-TEST-'+i+'\",'
						+ '\"contractAmount\":\"70000'+i+'\",'
						+ '\"currencyCode\":\"USD\",'
						+ '\"contractDateTime\":\"20190211\",'
						+ '\"priceTerms\":\"WAS'+i+'\",'
						+ '\"shipmentDueDateTime\":\"20190215\",'
						+ '\"exporterName\":\"tool\",'
						+ '\"exporterSsn\":\"963-7123-19045-21\",'
						+ '\"exporterAddress\":\"분당구\",'
						+ '\"importerName\":\"importer7\",'
						+ '\"importerCountryCode\":\"CO\",'
						+ '\"importerAddress\":\"콜롬비아\",'
						+ '\"shipmentCountryCode\":\"KR\",'
						+ '\"shipmentPortCode\":\"REF\",'
						+ '\"shipmentPortName\":\"인천\",'
						+ '\"transShipmentCountryCode\":\"DE",'
						+ '\"transShipmentPortCode\":\"DEF\",'
						+ '\"transShipmentPortName\":\"독일\",'
						+ '\"destinationCountryCode\":\"DK\",'
						+ '\"destinationPortCode\":\"DKF\",'
						+ '\"destinationPortName\":\"덴마크\",'
						+ '\"committer\":\"test99\"}'
						
			console.log(dataParam);
			sendAjax(dataParam);
			sleep(5*1000);
		}
	
	
	function sendAjax(dataParam) {
			
			$.ajax({
			    url: "http://210.102.77.186:8080/api/v1/exportContract?channelName=ktnetchannel",
			    type: 'POST',
			    dataType: 'json',
			    data: dataParam,
			    async:false,
			    contentType: 'application/json; charset=utf-8',
			    mimeType: 'application/json',
			    success: function(data) {
			    	
					console.log("성공");
					
			    },
			    error:function(data,status, er) {
			        console.dir(data);
			    }
			});
			
		}
		
	}
		
	
	function sleep(ms){
		  ts1 = new Date().getTime() + ms;
		  do ts2 = new Date().getTime(); while (ts2<ts1);
	}
		
		
	
	
	/* function sendAjax() {
	$.ajax({
	    url: "/dummyapi/exportcontract/109",
	    type: 'PUT',
	    dataType: 'json',
	    data: "{\"contractAmount\":2000}" ,
	    contentType: 'application/json; charset=utf-8',
	    mimeType: 'application/json',
	    success: function(data) {
	        alert(data.stateDesc);
	    },
	    error:function(data,status, er) {
	        alert("error: "+data+" status: "+status+" er:"+er);
	    }
	});
	} */
	
</script>
</head>
<body>
	<h1>hello</h1>
</body>
</html>